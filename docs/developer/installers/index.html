<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.91.2">
<meta name=robots content="index, follow">
<link rel="shortcut icon" href=../../../favicons/favicon.ico>
<link rel=apple-touch-icon href=../../../favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=../../../favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=../../../favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=../../../favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=../../../favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=../../../favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=../../../favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=../../../favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=../../../favicons/android-192x192.png sizes=192x192>
<title>Installer Logic | BeatVortex</title>
<meta name=description content="A deep dive into how BeatVortex handles the actual mod installation.
">
<meta property="og:title" content="Installer Logic">
<meta property="og:description" content="A deep dive into how BeatVortex handles the actual mod installation.
">
<meta property="og:type" content="article">
<meta property="og:url" content="/docs/developer/installers/"><meta property="article:section" content="docs">
<meta property="og:site_name" content="BeatVortex">
<meta itemprop=name content="Installer Logic">
<meta itemprop=description content="A deep dive into how BeatVortex handles the actual mod installation.
">
<meta itemprop=wordCount content="299">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="Installer Logic">
<meta name=twitter:description content="A deep dive into how BeatVortex handles the actual mod installation.
">
<link rel=preload href=../../../scss/main.min.704093cd1a56f37fd00dc35c7125fced09d88d60c92d59965b30c8c0eeef1cd5.css as=style>
<link href=../../../scss/main.min.704093cd1a56f37fd00dc35c7125fced09d88d60c92d59965b30c8c0eeef1cd5.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-164841073-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=../../../>
<span class=navbar-logo></span><span class=font-weight-bold>BeatVortex</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=../../../docs/><span class=active>Documentation</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=../../../blog/><span>Updates</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.1af650c4df94a112494c6a6e9cca3f31.json data-offline-search-base-href=../../../ data-offline-search-max-results=10>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<form class="td-sidebar__search d-flex align-items-center">
<input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.1af650c4df94a112494c6a6e9cca3f31.json data-offline-search-base-href=../../../ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li>
<a href=../../../docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsintroduction-li>
<a href=../../../docs/introduction/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsintroduction><span>Introduction</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsintroductionfaq-li>
<a href=../../../docs/introduction/faq/ title="Frequently Asked Questions" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsintroductionfaq><span>FAQ</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsusage-li>
<a href=../../../docs/usage/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsusage><span>Usage</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusageinstallation-li>
<a href=../../../docs/usage/installation/ title="Installing BeatVortex" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsusageinstallation><span>Installation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusagemods-li>
<a href=../../../docs/usage/mods/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsusagemods><span>Installing Mods</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusageconfiguration-li>
<a href=../../../docs/usage/configuration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsusageconfiguration><span>Configuration</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusagebsipa-li>
<a href=../../../docs/usage/bsipa/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsusagebsipa><span>Beat Saber IPA (BSIPA)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusageplaylists-li>
<a href=../../../docs/usage/playlists/ title="Installing Playlists" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsusageplaylists><span>Playlists</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusagesync-li>
<a href=../../../docs/usage/sync/ title="Bookmark Sync" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsusagesync><span>Sync</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsusagemod-assistant-li>
<a href=../../../docs/usage/mod-assistant/ title="BeatVortex for Mod Assistant Users" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsusagemod-assistant><span>Switching from Mod Assistant</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsdeveloper-li>
<a href=../../../docs/developer/ title="Developer Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsdeveloper><span>Development</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeveloperauthoring-li>
<a href=../../../docs/developer/authoring/ title="Packaging for Mod Authors" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeveloperauthoring><span>Packing Mods</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsdeveloperinstallers-li>
<a href=../../../docs/developer/installers/ title="Installer Logic" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsdeveloperinstallers><span class=td-sidebar-nav-active-item>Installers</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeveloperdependencies-li>
<a href=../../../docs/developer/dependencies/ title="Dependency Management" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeveloperdependencies><span>Dependencies</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopermeta-li>
<a href=../../../docs/developer/meta/ title="Metadata and Meta Servers" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopermeta><span>Vortex Metadata</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdevelopertranslation-li>
<a href=../../../docs/developer/translation/ title="Translating BeatVortex" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdevelopertranslation><span>Translation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeveloperdocs-li>
<a href=../../../docs/developer/docs/ title="Docs Contributions" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeveloperdocs><span>Documentation</span></a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href=https://github.com/agc93/beatvortex/tree/master/docs//content/en/docs/developer/installers.md class=td-page-meta--view target=_blank rel=noopener><i class="fa fa-file-alt fa-fw"></i> View page source</a>
<a href=https://github.com/agc93/beatvortex/edit/master/docs//content/en/docs/developer/installers.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/agc93/beatvortex/new/master/docs//content/en/docs/developer/installers.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/agc93/beatvortex/issues/new?title=Installer%20Logic" class=td-page-meta--issue target=_blank rel=noopener><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
</div>
<div class=td-toc><nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#background>Background</a></li>
<li><a href=#future-refactoring>Future Refactoring</a></li>
</ul>
</li>
</ul>
</nav></div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class=td-breadcrumbs>
<ol class=breadcrumb>
<li class=breadcrumb-item>
<a href=../../../docs/>Documentation</a>
</li>
<li class=breadcrumb-item>
<a href=../../../docs/developer/>Development</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
<a href=../../../docs/developer/installers/>Installers</a>
</li>
</ol>
</nav>
<div class=td-content>
<h1>Installer Logic</h1>
<div class=lead>A deep dive into how BeatVortex handles the actual mod installation.</div>
<header class=article-meta>
</header>
<div class="pageinfo pageinfo-primary">
<p>The information below <strong>only</strong> applies to BeatVortex versions from 0.3 onwards. Installation logic was completely rebuilt in 0.3.0 (and again in 0.3.1).</p>
</div>
<p>BeatVortex&rsquo;s installation logic is <em>slightly</em> over-engineered in order to meet a few design goals:</p>
<ol>
<li>Handle different mod types invisibly</li>
<li>Abstract away the actual download source of a mod</li>
<li>Handle both installation and metadata in a Vortex-friendly way.</li>
</ol>
<h3 id=background>Background</h3>
<p>As of 0.3.1, BeatVortex registers three separate installers to handle each of the available mod types: BeatMods-style plugin mods, song maps (from BeatSaver or not), models (from ModelSaber or not). The plugin mod installer also serves as a fallback installer. Vortex is responsible for selecting the installer to use based on basic test conditions (<code>isSongMod</code> and <code>isModelMod</code> in particular).</p>
<p>One of the biggest conceptual changes is differentiating the mod type and the mod source. The mod type will control how BeatVortex creates install instructions, and varies for plugins, maps, models or generic files. The mod source will control how BeatVortex provides metadata about the mod and varies for the supported sources: BeatMods, BeatSaver/BeastSaber, and ModelSaber.</p>
<p>The <code>ModInstaller</code> interface is used by an installer implementation for a mod <em>type</em> and controls how install instructions are created from a given file list. The <code>MetadataSource</code> interface is a separate optional abstraction that can be used for a mod <em>source</em> to handle any install-time metadata, by returning <code>attribute</code> instructions to be combined with the original install instructions.</p>
<h3 id=future-refactoring>Future Refactoring</h3>
<p>This new system is a major rework and definitely not guaranteed stable. As it stands, BeatVortex still has a lot of touch points between Vortex, the extension, the installers and the metadata sources. Future releases will likely tweak the existing <code>ModInstaller</code>/<code>MetadataSource</code> layers to make things a little clearer and handle failures better. Raise a GitHub issue before doing any drastic work around mod installation.</p>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/agc93/beatvortex aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 BeatVortex Team All Rights Reserved</small>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=../../../js/tabpane-persist.js></script>
<script src=../../../js/main.min.8ab8f81ff7e1454d30024cd6f956d4d341c3a97e2a673f988065f2ee4e147922.js integrity="sha256-irj4H/fhRU0wAkzW+VbU00HDqX4qZz+YgGXy7k4UeSI=" crossorigin=anonymous></script>
</body>
</html>