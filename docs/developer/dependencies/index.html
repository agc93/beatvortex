<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.62.2"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=../../../favicons/favicon.ico><link rel=apple-touch-icon href=../../../favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=../../../favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=../../../favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../../favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=../../../favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=../../../favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=../../../favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=../../../favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=../../../favicons/android-192x192.png sizes=192x192><title>Dependency Management | BeatVortex</title><meta property="og:title" content="Dependency Management"><meta property="og:description" content="A deep dive into how BeatVortex handles mod dependencies."><meta property="og:type" content="article"><meta property="og:url" content="/docs/developer/dependencies/"><meta property="og:site_name" content="BeatVortex"><meta itemprop=name content="Dependency Management"><meta itemprop=description content="A deep dive into how BeatVortex handles mod dependencies."><meta itemprop=wordCount content="580"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Dependency Management"><meta name=twitter:description content="A deep dive into how BeatVortex handles mod dependencies."><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-164841073-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preload href=../../../scss/main.min.8646b32f53524906d776a3eb59b52967546c991639006fa2cc3010e0541fdafb.css as=style><link href=../../../scss/main.min.8646b32f53524906d776a3eb59b52967546c991639006fa2cc3010e0541fdafb.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script><title>Dependency Management | BeatVortex</title></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=../../../><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">BeatVortex</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=../../../docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=../../../blog/><span>Updates</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.1a03284fb8e3dcaa551afff184d403e5e9d9f0c4bf04b713f5f8d848b42e48f1d2aa5b3f9097e99a113f2478a1bfeb3d6e21484818fb15e7285fab4105718317.json data-offline-search-base-href=../../../></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.1a03284fb8e3dcaa551afff184d403e5e9d9f0c4bf04b713f5f8d848b42e48f1d2aa5b3f9097e99a113f2478a1bfeb3d6e21484818fb15e7285fab4105718317.json data-offline-search-base-href=../../../>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../docs/introduction/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Introduction</a></li><ul><li class=collapse id=docsintroduction><a class="td-sidebar-link td-sidebar-link__page" id=m-docsintroductionfaq href=../../../docs/introduction/faq/>FAQ</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../docs/usage/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Usage</a></li><ul><li class=collapse id=docsusage><a class="td-sidebar-link td-sidebar-link__page" id=m-docsusageinstallation href=../../../docs/usage/installation/>Installation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsusagemods href=../../../docs/usage/mods/>Installing Mods</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsusageconfiguration href=../../../docs/usage/configuration/>Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsusagebsipa href=../../../docs/usage/bsipa/>Beat Saber IPA (BSIPA)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsusageplaylists href=../../../docs/usage/playlists/>Playlists</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsusagemod-assistant href=../../../docs/usage/mod-assistant/>Switching from Mod Assistant</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../docs/developer/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Development</a></li><ul><li class="collapse show" id=docsdeveloper><a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloperauthoring href=../../../docs/developer/authoring/>Packing Mods</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloperinstallers href=../../../docs/developer/installers/>Installers</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-docsdeveloperdependencies href=../../../docs/developer/dependencies/>Dependencies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdevelopermeta href=../../../docs/developer/meta/>Vortex Metadata</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdevelopertranslation href=../../../docs/developer/translation/>Translation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsdeveloperdocs href=../../../docs/developer/docs/>Documentation</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/agc93/beatvortex/edit/master/docs//content/en/docs/developer/dependencies.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/agc93/beatvortex/issues/new?title=Dependency%20Management" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a></div></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=../../../docs/>Documentation</a></li><li class=breadcrumb-item><a href=../../../docs/developer/>Development</a></li><li class="breadcrumb-item active" aria-current=page><a href=../../../docs/developer/dependencies/>Dependencies</a></li></ol></nav><div class=td-content><h1>Dependency Management</h1><div class=lead>A deep dive into how BeatVortex handles mod dependencies.</div><div class="pageinfo pageinfo-primary"><p>The information below <strong>only</strong> applies to BeatVortex versions from 0.3 onwards. Installation logic was completely rebuilt in 0.3.0.</p><p>Additionally, dependencies are an area of very active development and things are changing rapidly. Docs may be a little slow to update.</p></div><p>Dependency management in Vortex is always a bit of a mess and it's especially so if you're <em>not</em> using Nexus Mods, which we are definitely not. As it stands, BeatVortex can notify you about missing dependencies and will <strong>attempt</strong> to install them for you when you install a mod.</p><blockquote><p>It's our understanding that BeatVortex is the only game extension handling non-Nexus dependencies so this is uncharted ground.</p></blockquote><p>There's some limitations in how Vortex/<code>modmeta-db</code>/BeatVortex/BeatMods interact that makes this story surprisingly hard.</p><h4 id=beatmods-doesnt-have-md5s-for-archives>BeatMods doesn't have MD5s for archives</h4><p>The backing logic for Vortex's dependency management happens inside the <code>modmeta-db</code> library. This library allows for querying metadata (including dependencies) using a single identifying key for a mod download: the MD5 sum of the archive. Unfortunately, BeatMods <strong>does not</strong> store the hash of archive files, only of the individual files. This means we can't do on-demand lookups (through <code>modmeta-db</code>) for mod files.</p><h4 id=beatmods-does-dependencies-weird>BeatMods does dependencies weird</h4><p>The BeatMods API, for reasons likely lost to time, returns dependencies from the API in a super-weird way: top-level dependencies are fine, but <em>their</em> dependencies are only returned as document IDs, meaning we can't easily go from a single API call to a full dependency tree. Thankfully, Vortex (mostly) has our back here, and can do basic-but-good-enough dependency resolution.</p><h4 id=vortex-doesnt-fully-implement-modmeta-db>Vortex doesn't fully implement <code>modmeta-db</code></h4><p>The backing <code>modmeta-db</code> supports looking up mod files by a couple of different &ldquo;keys&rdquo;: MD5 hash (see above), logical file name, and custom file expressions. At present, since Nexus uses MD5 hashes, Vortex mostly just uses the MD5 hash for installation. In earlier versions of Vortex, that meant we could specify dependency rules, but Vortex wouldn't know where to <em>find</em> those dependencies.</p><p>Vortex releases from 1.2.12 added support for looking up mod dependencies using a logical file name, meaning we can now use a metaserver (essentially an implementation of <code>modmeta-db</code> over REST) to return information on dependencies, including where to find them (i.e BeatMods). Finally, Vortex releases from 1.12.3 onwards improved dependency resolution so that BeatMods extensions installed from archives or the browser should automatically install all the required dependencies.</p><blockquote><p>A huge thanks to the Nexus/Vortex team, who have been very helpful in expanding and explaining Vortex's dependency support. Thanks Tannin!</p></blockquote><p>We now add a metaserver at startup that returns metadata and dependency information for all the mods available on BeatMods. This behaviour can be toggled off in the Settings if desired. With the metaserver disabled, Vortex will still warn on missing <em>immediate</em> dependencies, but it won't be able to automatically install them, or build a full dependency tree.</p><h4 id=beatmods-provides-only-basic-dependency-information>BeatMods provides only basic dependency information</h4><p>BeatMods dependencies can essentially be summarised down to a mod name and specific version. In practice, this is generally <em>enough</em> and mod managers (whether it's BeatVortex or Mod Assistant) can just install that version. The only problem here is that we are now locking depenencies to very specific package versions which Vortex now has to take a hard-and-fast restriction.</p><p>As a middle ground, BeatVortex assumes that mod authors are following Semantic Versioning (SemVer) correctly and matches major versions only. That means that, for example, a mod asking for SongCore 2.7.5 could have SongCore 2.9.x installed.</p><blockquote><p>We're using the <code>^</code> operator for those already familiar with the Node/npm semver format.</p></blockquote><div class="text-muted mt-5 pt-3 border-top">Last modified January 1, 0001</div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/agc93/beatvortex><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2020 BeatVortex Team All Rights Reserved</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=../../../js/main.min.3587468abafd7ee678f61330f7c574ba0376f12451f11e076f2283f1e0504095.js integrity="sha256-NYdGirr9fuZ49hMw98V0ugN28SRR8R4HbyKD8eBQQJU=" crossorigin=anonymous></script></body></html>